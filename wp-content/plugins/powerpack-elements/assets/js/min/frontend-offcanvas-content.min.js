!function(n){PPOffcanvasContent=function(t){this.node=t,this.wrap=t.find(".pp-offcanvas-content-wrap"),this.cart_wrap=t.find(".pp-offcanvas-cart-container"),this.content=t.find(".pp-offcanvas-content"),this.button=t.find(".pp-offcanvas-toggle"),this.settings=this.wrap.data("settings"),this.toggle_source=this.settings.toggle_source,this.id=this.settings.content_id,this.toggle_id=this.settings.toggle_id,this.toggle_class=this.settings.toggle_class,this.transition=this.settings.transition,this.esc_close=this.settings.esc_close,this.body_click_close=this.settings.body_click_close,this.links_click_close=this.settings.links_click_close,this.direction=this.settings.direction,this.buttons_position=this.settings.buttons_position,this.duration=500,this.destroy(),this.init()},PPOffcanvasContent.prototype={id:"",node:"",wrap:"",content:"",button:"",settings:{},transition:"",duration:400,initialized:!1,animations:["slide","slide-along","reveal","push"],init:function(){this.wrap.length&&(n("html").addClass("pp-offcanvas-content-widget"),0===n(".pp-offcanvas-container").length&&(n("body").wrapInner('<div class="pp-offcanvas-container" />'),this.content.insertBefore(".pp-offcanvas-container")),0<this.wrap.find(".pp-offcanvas-content").length&&(0<n(".pp-offcanvas-container > .pp-offcanvas-content-"+this.id).length&&n(".pp-offcanvas-container > .pp-offcanvas-content-"+this.id).remove(),0<n("body > .pp-offcanvas-content-"+this.id).length&&n("body > .pp-offcanvas-content-"+this.id).remove(),n("body").prepend(this.wrap.find(".pp-offcanvas-content"))),this.bindEvents())},destroy:function(){this.close(),this.animations.forEach(function(t){n("html").hasClass("pp-offcanvas-content-"+t)&&n("html").removeClass("pp-offcanvas-content-"+t)}),n("body > .pp-offcanvas-content-"+this.id).length},setTrigger:function(){return"element-id"==this.toggle_source&&""!=this.toggle_id?n("#"+this.toggle_id):"element-class"==this.toggle_source&&""!=this.toggle_class?n("."+this.toggle_class):this.node.find(".pp-offcanvas-toggle")},bindEvents:function(){$trigger=this.setTrigger(),$trigger&&$trigger.on("click",n.proxy(this.toggleContent,this)),n("body").delegate(".pp-offcanvas-content .pp-offcanvas-close","click",n.proxy(this.close,this)),"yes"===this.links_click_close&&n("body").delegate(".pp-offcanvas-content .pp-offcanvas-body a","click",n.proxy(this.close,this)),"yes"===this.esc_close&&this.closeESC(),"yes"===this.body_click_close&&this.closeClick(),n(window).resize(n.proxy(this._resize,this))},toggleContent:function(t){t.preventDefault(),n("html").hasClass("pp-offcanvas-content-open")?this.close():this.show(),this._resize()},show:function(){n(".pp-offcanvas-content-"+this.id).addClass("pp-offcanvas-content-visible"),n("html").addClass("pp-offcanvas-content-"+this.transition),n("html").addClass("pp-offcanvas-content-"+this.direction),n("html").addClass("pp-offcanvas-content-open"),n("html").addClass("pp-offcanvas-content-"+this.id+"-open"),n("html").addClass("pp-offcanvas-content-reset"),this.button.addClass("pp-is-active"),this._resize()},close:function(){n("html").removeClass("pp-offcanvas-content-open"),n("html").removeClass("pp-offcanvas-content-"+this.id+"-open"),setTimeout(n.proxy(function(){n("html").removeClass("pp-offcanvas-content-reset"),n("html").removeClass("pp-offcanvas-content-"+this.transition),n("html").removeClass("pp-offcanvas-content-"+this.direction),n(".pp-offcanvas-content-"+this.id).removeClass("pp-offcanvas-content-visible")},this),500),this.button.removeClass("pp-is-active")},closeESC:function(){var s=this;""!==s.settings.esc_close&&n(document).on("keydown",function(t){27===t.keyCode&&s.close()})},closeClick:function(){var s=this;$trigger="element-id"==this.toggle_source&&""!=this.toggle_id?"#"+this.toggle_id:"element-class"==this.toggle_source&&""!=this.toggle_class?"."+this.toggle_class:".pp-offcanvas-toggle",n(document).on("click",function(t){n(t.target).is(".pp-offcanvas-content")||0<n(t.target).parents(".pp-offcanvas-content").length||n(t.target).is(".pp-offcanvas-toggle")||0<n(t.target).parents(".pp-offcanvas-toggle").length||n(t.target).is($trigger)||0<n(t.target).parents($trigger).length||!n(t.target).is(".pp-offcanvas-container")||s.close()})},_resize:function(){var t,s,e;!this.cart_wrap.length||(t=n(".pp-offcanvas-content-"+this.id))&&0<t.length&&("bottom"===this.buttons_position?(s=+(s=window.innerHeight),t.find(".pp-offcanvas-inner").css({height:s+"px",top:0}),headerHeight=t.find(".pp-offcanvas-cart-header").outerHeight(!0),wrapHeight=t.find(".pp-offcanvas-wrap").outerHeight(),cartTotalHeight=t.find(".woocommerce-mini-cart__total").outerHeight(),cartButtonsHeight=t.find(".woocommerce-mini-cart__buttons").outerHeight(),cartMessageHeight=t.find(".pp-woo-menu-cart-message").outerHeight(),itemsHeight=s-(headerHeight+cartTotalHeight+cartButtonsHeight+cartMessageHeight),finalItemsHeight=itemsHeight-(s-wrapHeight),finalItemsHeight+="px"):finalItemsHeight="auto",e='<style id="pp-woo-style-'+this.id+'">',e+="#"+t.attr("id")+" .woocommerce-mini-cart.cart_list {",e+="height: "+finalItemsHeight,e+="}",e+="</style>",0<n("#pp-woopack-style-"+this.id).length&&n("#pp-woopack-style-"+this.id).remove(),n("head").append(e))}}}(jQuery);