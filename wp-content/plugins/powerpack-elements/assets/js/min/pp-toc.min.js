!function(l){var e=elementorModules.frontend.handlers.Base.extend({stretchElement:null,getDefaultSettings:function(){return{selectors:{widgetContainer:".pp-toc",container:'.elementor:not([data-elementor-type="header"]):not([data-elementor-type="footer"])',expandButton:".pp-toc__header",collapseButton:".pp-toc__header",body:".pp-toc__body",headerTitle:".pp-toc__header-title",scrollTop:".pp-toc__scroll-to-top--container"},classes:{anchor:"pp-toc-menu-anchor",listWrapper:"pp-toc__list-wrapper",listItem:"pp-toc__list-item",listTextWrapper:"pp-toc__list-item-text-wrapper",firstLevelListItem:"pp-toc__top-level",listItemText:"pp-toc__list-item-text",activeItem:"pp-toc-item-active",headingAnchor:"pp-toc__heading-anchor",collapsed:"pp-toc--collapsed"},listWrapperTag:"numbers"===this.getElementSettings().marker_view?"ol":"ul"}},getDefaultElements:function(){var t=this.getSettings(),e=this.getElementSettings();return{$pageContainer:jQuery(e.container||t.selectors.container),$widgetContainer:this.$element.find(t.selectors.widgetContainer),$expandButton:this.$element.find(t.selectors.expandButton),$collapseButton:this.$element.find(t.selectors.collapseButton),$tocBody:this.$element.find(t.selectors.body),$listItems:this.$element.find("."+t.classes.listItem),$scrollTop:this.$element.find(t.selectors.scrollTop)}},bindEvents:function(){var t=this,e=this.getElementSettings();e.minimize_box&&this.elements.$expandButton.on("click",function(){return l(t.$element).hasClass(t.getSettings("classes.collapsed"))?t.expandBox():t.collapseBox()}),e.collapse_subitems&&this.elements.$listItems.hover(function(t){return jQuery(t.target).slideToggle()}),e.sticky_toc_toggle&&elementorFrontend.elements.$window.on("resize",this.handleStickyToc),e.scroll_to_top_toggle&&this.elements.$scrollTop.on("click",function(){t.scrollToTop()})},getHeadings:function(){var t=this.getElementSettings(),e=t.headings_by_tags.join(","),i=this.getSettings("selectors"),s=t.exclude_headings_by_selector;return this.elements.$pageContainer.find(e).not(i.headerTitle).filter(function(t,e){return!jQuery(e).closest(s).length})},addAnchorsBeforeHeadings:function(){var e=this.getSettings("classes");this.elements.$headings.before(function(t){return'<span id="'+e.headingAnchor+"-"+t+'" class="'+e.anchor+' "></span>'})},activateItem:function(t){var e,i=this.getSettings("classes");this.deactivateActiveItem(t),t.addClass(i.activeItem),this.$activeItem=t,this.getElementSettings("collapse_subitems")&&(e=void 0,(e=t.hasClass(i.firstLevelListItem)?t.parent().next():t.parents("."+i.listWrapper).eq(-2)).length?(this.$activeList=e,this.$activeList.stop().slideDown()):delete this.$activeList)},deactivateActiveItem:function(t){var e;this.$activeItem&&!this.$activeItem.is(t)&&(e=this.getSettings().classes,this.$activeItem.removeClass(e.activeItem),!this.$activeList||t&&this.$activeList[0].contains(t[0])||this.$activeList.slideUp())},followAnchor:function(e,i){var s=this,t=e[0].hash,n=void 0;try{n=jQuery(decodeURIComponent(t))}catch(o){return}0===i&&elementorFrontend.waypoint(n,function(t){s.itemClicked||("down"===t?s.activateItem(e):s.deactivateActiveItem())},{offset:"bottom-in-view",triggerOnce:!1}),elementorFrontend.waypoint(n,function(t){s.itemClicked||("down"===t?s.activateItem(s.$listItemTexts.eq(i+1)):s.activateItem(e))},{offset:0,triggerOnce:!1})},followAnchors:function(){var i=this;this.$listItemTexts.each(function(t,e){return i.followAnchor(jQuery(e),t)})},populateTOC:function(){var t=this;this.listItemPointer=0;var e=this.getElementSettings();e.hierarchical_view?this.createNestedList():this.createFlatList(),this.$listItemTexts=this.$element.find(".pp-toc__list-item-text"),this.$listItemTexts.on("click",this.onListItemClick.bind(this)),elementorFrontend.isEditMode()||this.followAnchors(),l(window).on("scroll",function(){"window_top"===e.scroll_to_top_option?0<l(window).scrollTop()?t.elements.$scrollTop.show():t.elements.$scrollTop.hide():t.getID().parents(".elementor-widget-wrap").offset().top>=l(window).scrollTop()?t.elements.$scrollTop.hide():t.elements.$scrollTop.show()})},createNestedList:function(){var n=this;this.headingsData.forEach(function(t,e){t.level=0;for(var i=e-1;0<=i;i--){var s=n.headingsData[i];if(s.tag<=t.tag){t.level=s.level,s.tag<t.tag&&t.level++;break}}}),this.elements.$tocBody.html(this.getNestedLevel(0))},createFlatList:function(){this.elements.$tocBody.html(this.getNestedLevel())},getNestedLevel:function(t){for(var e=this.getSettings(),i=this.getElementSettings(),s=this.getElementSettings("icon"),n="<"+e.listWrapperTag+' class="'+e.classes.listWrapper+'">';this.listItemPointer<this.headingsData.length;){var o,l,a=this.headingsData[this.listItemPointer],r=e.classes.listItemText;if(0===a.level&&(r+=" "+e.classes.firstLevelListItem),t>a.level)break;t===a.level&&(n+='<li class="'+e.classes.listItem+" level-"+t+'">',n+='<div class="'+e.classes.listTextWrapper+'">',o='<a href="#'+e.classes.headingAnchor+"-"+this.listItemPointer+'" class="'+r+'">'+a.text+"</a>","bullets"===i.marker_view&&s&&(o='<i class="'+s.value+'"></i>'+o),n+=o,n+="</div>",this.listItemPointer++,(l=this.headingsData[this.listItemPointer])&&t<l.level&&(n+=this.getNestedLevel(l.level)),n+="</li>")}return n+="</"+e.listWrapperTag+">"},handleNoHeadingsFound:function(){var t=ppToc;if(elementorFrontend.isEditMode())return this.elements.$tocBody.html(t.no_headings_found)},collapseOnInit:function(){var t=(self=this).getElementSettings("minimized_on"),e=elementorFrontend.getCurrentDeviceMode();""!==t&&"array"==typeof t&&t.forEach(function(t){("tablet"===t&&"tablet"===e||"mobile"===t&&"mobile"===e||"desktop"===t&&"desktop"==e)&&self.collapseBox()})},setHeadingsData:function(){var i=this;this.headingsData=[],this.elements.$headings.each(function(t,e){i.headingsData.push({tag:+e.nodeName.slice(1),text:e.textContent})})},run:function(){if(elementSettings=this.getElementSettings(),this.elements.$headings=this.getHeadings(),!this.elements.$headings.length)return this.handleNoHeadingsFound();this.setHeadingsData(),elementorFrontend.isEditMode()||this.addAnchorsBeforeHeadings(),this.populateTOC(),elementSettings.minimize_box&&this.collapseOnInit(),elementSettings.sticky_toc_toggle&&this.handleStickyToc()},expandBox:function(){var t=this.getCurrentDeviceSetting("min_height");this.$element.removeClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.slideDown(),this.elements.$widgetContainer.css("min-height",t.size+t.unit)},collapseBox:function(){this.$element.addClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.slideUp(),this.elements.$widgetContainer.css("min-height","0px")},onInit:function(){var t=this;this.initElements(),this.bindEvents(),jQuery(document).ready(function(){return t.run()})},onListItemClick:function(t){var e=this;this.itemClicked=!0,setTimeout(function(){return e.itemClicked=!1},2e3);var i=jQuery(t.target),s=i.parent().next(),n=this.getElementSettings("collapse_subitems"),o=void 0;n&&i.hasClass(this.getSettings("classes.firstLevelListItem"))&&s.is(":visible")&&(o=!0),this.activateItem(i),n&&o&&s.slideUp()},handleStickyToc:function(){var t,e=this.getElementSettings(),i=elementorFrontend.getCurrentDeviceMode(),s=e.sticky_toc_disable_on,n=this.getID(),o=e.sticky_toc_type;if("in-place"===o?(t=n.parent().parent().outerWidth(),n.css("width",t),tocWidth=t):"custom-position"===o&&n.css("width",""),-1!==l.inArray(i,s))return n.removeClass("floating-toc"),void l(window).off("scroll",this.stickyScroll);l(window).on("scroll",l.proxy(this.stickyScroll,this))},stickyScroll:function(){var t=this.getID(),e=(this.getElementSettings(),document.querySelector(".elementor-widget-pp-table-of-contents").getBoundingClientRect()),i=t.outerHeight();if(t.hasClass("floating-toc")?t.parent().parent().css("height",i):t.parent().parent().css("height",""),e.y+e.height/2<0){if(t.hasClass("floating-toc"))return;t.fadeOut(250,function(){t.addClass("floating-toc"),t.fadeIn()})}else{if(!t.hasClass("floating-toc"))return;t.fadeOut(250,function(){t.removeClass("floating-toc"),t.fadeIn()})}},scrollToTop:function(){var t;"window_top"===this.getElementSettings("scroll_to_top_option")?l("html, body").animate({scrollTop:0},250):(t=this.getID().parents(".elementor-widget-pp-table-of-contents"),l("html, body").animate({scrollTop:l(t).offset().top-60},250))},getID:function(){return l("#pp-toc-"+this.$element[0].attributes["data-id"].nodeValue)}});jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/pp-table-of-contents.default",function(t){elementorFrontend.elementsHandler.addHandler(e,{$element:t})})})}(jQuery);